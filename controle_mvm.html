
<!DOCTYPE html>

<html lang="pt-BR">
<head>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&amp;display=swap" rel="stylesheet"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Stellantis - Controle de Lacres</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    :root {
      --cor-fundo: #0b1d30;
      --cor-caixa: #1c2b3d;
      --cor-primaria: #3366ff;
      --cor-hover: #1a4ed8;
      --cor-texto: #ffffff;
      --cor-alerta: #f0ad4e;
      --cor-erro: #ff4444;
      --fonte: 'Inter', sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
  position: relative;
      margin: 0;
      font-family: var(--fonte);
      background-color: #0a0f1c;
      background-image: radial-gradient(circle at top left, #1b2735, #090a0f);
      color: var(--cor-texto);
      padding: 1rem;
    }

    .container {
      max-width: 920px;
      margin: auto;
      background: rgba(28, 43, 61, 0.6); backdrop-filter: blur(15px); border: 1px solid rgba(0,212,255,0.15);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.15), inset 0 0 10px rgba(0,255,255,0.05);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      animation: fadeIn 0.6s ease-in-out;
      backdrop-filter: blur(10px);
    }

    h1, h2, h3 {
      text-align: center;
      margin: 0;
    }

    h1 {
      font-size: 2rem;
      color: var(--cor-texto);
      letter-spacing: 2px;
    }

    h2 {
      font-size: 1.4rem;
      color: var(--cor-texto);
      opacity: 0.85;
    }

    h3 {
      font-size: 1.2rem;
      color: var(--cor-primaria);
      opacity: 0.85;
    }

    label {
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      flex-direction: column;
      margin-top: 0.5rem;
    }

    input, select {
      margin-top: 0.4rem;
      padding: 0.7rem;
      border: 1px solid #00d2ff44;
      border-radius: 12px;
      font-size: 1rem;
      background: rgba(0, 0, 0, 0.35);
      color: #ffffff;
      backdrop-filter: blur(4px);
      box-shadow: inset 0 0 8px rgba(0, 210, 255, 0.1);
      transition: all 0.2s ease-in-out;
    }

    input:focus, select:focus {
      outline: 2px solid #00d2ff;
      box-shadow: 0 0 6px #00d2ff;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.75rem;
    }

    button {
      background: linear-gradient(135deg, #3a7bd5, #00d2ff);
      color: #ffffff;
      border: 1px solid #00d2ff;
      padding: 0.75rem 1.5rem;
      border-radius: 14px;
      font-size: 1rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(0, 210, 255, 0.5);
      transition: all 0.3s ease-in-out; box-shadow: 0 0 6px #00d2ff66, 0 0 10px #00d2ff33; animation: glowPulse 1.8s infinite alternate;
    }

    button:hover {
      background: linear-gradient(135deg, #00d2ff, #3a7bd5);
      box-shadow: 0 0 20px rgba(0, 210, 255, 0.85);
      transform: scale(1.05);
    }

    .auto-save-icon {
      text-align: right;
      font-size: 0.85rem;
      color: #55dd55;
    }

    .info {
      font-weight: bold;
      text-align: center;
      color: var(--cor-alerta);
    }

    .warning {
      color: var(--cor-erro);
      font-size: 0.9rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      font-size: 0.95rem;
    }

    th, td {
      border: 1px solid #2e3c51;
      padding: 0.6rem;
      text-align: center;
      color: var(--cor-texto);
    }

    th {
      background: #233246;
      color: var(--cor-primaria);
    }

    @media (max-width: 600px) {
      .container {
        padding: 1rem;
      }

      .button-group {
        flex-direction: column;
      }

      button {
        width: 100%;
        justify-content: center;
      }

      .auto-save-icon {
        text-align: center;
        margin-top: 0.5rem;
      }
    }

    @keyframes glowPulse {
  from { box-shadow: 0 0 6px #00d2ff66, 0 0 10px #00d2ff33; }
  to { box-shadow: 0 0 10px #00d2ff66, 0 0 15px #00d2ff44; }
}

@keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    </style>
</head>
<body>
<div id="tsparticles" style="position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1;"></div>
<script>
tsParticles.load("tsparticles", {
  background: { color: { value: "#0a0f1c" } },
  particles: {
    number: { value: 40 },
    color: { value: "#00d2ff" },
    shape: { type: "circle" },
    opacity: { value: 0.4 },
    size: { value: 3 },
    move: { enable: true, speed: 1.5, direction: "none", outModes: { default: "bounce" } }
  },
  interactivity: {
    events: { onHover: { enable: true, mode: "repulse" }, resize: true },
    modes: { repulse: { distance: 100 } }
  }
});
</script>
<div style="position: fixed; top: 16px; right: 16px; z-index: 9999;">
</div>
<div style="position: absolute; top: 20px; right: 20px;">
</div>
<div class="container">
<h1 style="font-family: 'Orbitron', sans-serif; font-size: 2.2rem; letter-spacing: 6px; background: linear-gradient(90deg, #00faff, #0077ff);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800; text-shadow: 0 0 10px rgba(0,210,255,0.5);">STELLANTIS</h1>
<h2 style="font-size: 1.3rem; font-weight: 600; letter-spacing: 3px; text-transform: uppercase; color: #00d2ff; opacity: 0.85; margin-top: 0.3rem;">Seguran√ßa Patrimonial</h2>
<h3 style="font-size: 1.1rem; font-weight: 400; color: #ffffffcc; margin-bottom: 1rem;">Controle de MVM</h3>
<label>Setor:
      <select id="setor"><option value="Caixaria G08">Caixaria G08</option><option value="Caixaria G89">Caixaria G89</option><option value="P√°tio central de Embalagens">P√°tio central de Embalagens</option><option value="Jis G04 - 72">Jis G04 - 72</option><option value="Jis G04 - 73">Jis G04 - 73</option><option value="Mecanismo G04">Mecanismo G04</option><option value="Interni G89">Interni G89</option><option value="66AU G09">66AU G09</option><option value="Ilha Ecol√≥gica G38">Ilha Ecol√≥gica G38</option><option value="P√°tio de Sucatas G15">P√°tio de Sucatas G15</option></select>
</label>
<label>Turno:
      <select id="turno">
<option value="1¬∫">1¬∫</option>
<option value="2¬∫">2¬∫</option>
<option value="3¬∫">3¬∫</option>
</select>
</label>
<label>N√∫mero de MVM:<input id="numeroMVM" inputmode="numeric" pattern="\d*" type="number"/><span id="confirmIcon" style="display: none; margin-left: 0.5em;">‚úÖ</span>
<div class="warning" id="alertaRepetido"></div>
</label>
<label>N√∫mero da Placa:<input id="numeroPlaca" placeholder="Formato Mercosul: ABC1D23" type="text"/>
<div class="warning" id="alertaQuantidade"></div>
</label>
<label>Conferente/Registro:
      <input id="conferente" type="text"/>
</label>
<div class="info" id="info"></div>
<div class="auto-save-icon">üíæ Salvamento autom√°tico</div>
<div class="button-group">
<button onclick="adicionarMVM()">‚ûï Adicionar</button>
<button onclick="gerarPlanilha()">üìÑ Gerar Excel</button>
<button onclick="desfazerUltimo()">‚Ü©Ô∏è Desfazer</button>
<button onclick="desfazerTudo()">üóëÔ∏è Desfazer Tudo</button>
<button onclick="finalizarTurno()">‚úÖ Finalizar Turno</button>
<button onclick="toggleTabela()">üìä Visualizar Tabela</button></div>
<table id="tabelaLacres">
<thead>
<tr><th>Setor</th><th>N¬∞ MVM</th><th>N¬∞ Placa</th><th>Conferente</th><th>Data e Hora</th></tr>
</thead>
<tbody></tbody>
</table>
</div>
<script>
let mvm = [];
try {
  mvm = JSON.parse(localStorage.getItem("mvm") || "[]");
} catch (e) {
  mvm = [];
}
let historicoAdicoes = [];

function atualizarTabela() {
  const tbody = document.querySelector("#tabelaLacres tbody");
  tbody.innerHTML = "";
  mvm.forEach(item => {
    const tr = document.createElement("tr");
    ["setor", "numeroMVM", "numeroPlaca", "conferente", "dataHora"].forEach(key => {
      const td = document.createElement("td");
      td.textContent = item[key];
      tr.appendChild(td);
    });
    tbody.appendChild(tr);
  });
  localStorage.setItem("mvm", JSON.stringify(mvm));
  document.getElementById("info").textContent = mvm.length ?
    `√öltimo MVM: ${mvm[mvm.length - 1].numeroMVM} | √öltima Placa: ${mvm[mvm.length - 1].numeroPlaca}` : "";
}

function adicionarMVM() {
  const setor = document.getElementById("setor").value;
  const numeroMVM = document.getElementById("numeroMVM").value.trim().toUpperCase();
  const numeroPlaca = document.getElementById("numeroPlaca").value.trim().toUpperCase();
  const conferente = document.getElementById("conferente").value;

  if (!numeroMVM || !numeroPlaca || !conferente) {
    alert("Preencha todos os campos obrigat√≥rios.");
    return;
  }

  const novoItem = {
    setor,
    numeroMVM,
    numeroPlaca,
    conferente,
    dataHora: new Date().toLocaleString()
  };

  mvm.push(novoItem);
  historicoAdicoes.push([novoItem]);
  mostrarMensagemConfirmacao(numeroMVM); mostrarIconeConfirmacao(numeroMVM);
  atualizarTabela();
}

function gerarPlanilha() {
  let csv = "Setor,N¬∞ MVM,N¬∞ Placa,Conferente,Data e Hora\n" +
    mvm.map(l => [l.setor, l.numeroMVM, l.numeroPlaca, l.conferente, l.dataHora].join(",")).join("\n");
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "controle_mvm.csv";
  a.click();
  alert("Planilha gerada com sucesso");
}

function desfazerUltimo() {
  if (mvm.length === 0) return;
  const removido = mvm.pop();
  historicoAdicoes.push([{ ...removido }]);
  mostrarMensagemConfirmacao(numeroMVM); mostrarIconeConfirmacao(numeroMVM);
  atualizarTabela();
}

function desfazerTudo() {
  if (!historicoAdicoes.length) return;
  const ultimaAcao = historicoAdicoes.pop();
  mvm = mvm.filter(l => !ultimaAcao.find(u => u.numeroMVM === l.numeroMVM));
  mostrarMensagemConfirmacao(numeroMVM); mostrarIconeConfirmacao(numeroMVM);
  atualizarTabela();
}

function finalizarTurno() {
  if (confirm("Tem certeza? Todos os dados ser√£o apagados")) {
    mvm = [];
    historicoAdicoes = [];
    localStorage.removeItem("mvm");
    mostrarMensagemConfirmacao(numeroMVM); mostrarIconeConfirmacao(numeroMVM);
  atualizarTabela();
    document.getElementById("numeroMVM").value = "";
    document.getElementById("numeroPlaca").value = "";
    document.getElementById("conferente").value = "";
    alert("Turno finalizado com sucesso");
  }
}

mostrarMensagemConfirmacao(numeroMVM); mostrarIconeConfirmacao(numeroMVM);
  atualizarTabela();

function mostrarIconeConfirmacao(numeroMVM) {
  const icon = document.getElementById("confirmIcon");
  if (icon) {
    icon.style.display = "inline";
    setTimeout(() => {
      icon.style.display = "none";
    }, 3000);
  }
}
</script>
<script>
// Oculta tabela inicialmente
document.addEventListener("DOMContentLoaded", function() {
  const tabela = document.getElementById("tabelaLacres");
  if (tabela) {
    tabela.style.display = "none";
  }
});

function toggleTabela() {
  const tabela = document.getElementById("tabelaLacres");
  const botao = event.target;
  if (tabela.style.display === "none") {
    tabela.style.display = "table";
    botao.textContent = "üôà Esconder Tabela";
  } else {
    tabela.style.display = "none";
    botao.textContent = "üìä Visualizar Tabela";
  }
}

function mostrarMensagemConfirmacao(numeroMVM) {
  const info = document.getElementById("info");
  info.textContent = `‚úÖ N√∫mero de MVM ${numeroMVM} adicionado com sucesso`;
  setTimeout(() => {
    atualizarTabela();
  }, 3000);
}
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const usuario = localStorage.getItem("usuario");
  const registro = localStorage.getItem("registro");
  const campo = document.getElementById("conferente");
  if (campo) {
    campo.value = (usuario && registro) ? usuario + " / " + registro : "";
  }
});
</script>

<div style="position:fixed;top:16px;right:16px;z-index:9999;cursor:pointer;" onclick="localStorage.removeItem('usuario');localStorage.removeItem('registro');window.location.href='index.html';" title="Sair"><svg fill="#00d2ff" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M16 13v-2H7V8l-5 4 5 4v-3h9z"/><path d="M20 3H10v2h10v14H10v2h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg></div><script>document.addEventListener("DOMContentLoaded",function(){const u=localStorage.getItem("usuario"),r=localStorage.getItem("registro"),c=document.getElementById("conferente");if(c){c.value=u&&r?u+" / "+r:"";}});</script></body>
</html>
